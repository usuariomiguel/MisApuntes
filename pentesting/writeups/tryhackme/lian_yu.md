# Lian\_Yu

<figure><img src="../../../.gitbook/assets/1 NNcKSqF30pmMNp37KbwC7A.png" alt=""><figcaption></figcaption></figure>

Identificacion de puertos y servicios

```
nmap IP -Pn -p- -v -n --min-rate 3000
```

<div align="left">

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

</div>

Vamos a hacer un gobuster en busca de directorios web

```
gobuster dir -u URL -w Diccionary -x .php,.html,.txt
```

<figure><img src="../../../.gitbook/assets/image (2) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

En el código de la página de island vemos una palabra secreta -> **vigilante**; este pobablemente sea el nombre de usuario del servidor ftp o ssh.

<figure><img src="../../../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Vamos a buscar directorios dentro de **island** con nuestra herramienta gobuster; encontraremos el directorio **2100:**

<figure><img src="../../../.gitbook/assets/image (5) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption><p>Resultado de Gobuster</p></figcaption></figure>

<div align="left">

<figure><img src="../../../.gitbook/assets/image (6) (1) (1) (1) (1) (1) (1).png" alt="" width="375"><figcaption><p>Página 2100</p></figcaption></figure>

</div>

<div align="left">

<figure><img src="../../../.gitbook/assets/image (7) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption><p>Código fuente de la web en 2100</p></figcaption></figure>

</div>

En el comentario de la pagina de 2100 dice que hay un archivo .ticket, por lo que vamos a hacer una fuerza bruta de ficheros/directorios con **gobuster** dentro del directorio **2100:**

<figure><img src="../../../.gitbook/assets/image (8) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

Encontramos el token **green\_arrow.ticket:**

<div align="left">

<figure><img src="../../../.gitbook/assets/image (9) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

</div>

El token esta en **base58** , vamos a desencriptarlo para sacar la contraseña real

<div align="left">

<figure><img src="../../../.gitbook/assets/image (11) (1) (1) (1) (1).png" alt="" width="563"><figcaption><p><strong>http://gchq.github.io/Cyberchef/</strong></p></figcaption></figure>

</div>

Ya tenemos la contraseña para aceder al servidor ftp con el usuario vigilante y nos descargamos los archivos guardados en el usuario vigilante; podemos ver que hay una carpeta para un usuario llamado **slade** posiblemente dentro de estos archivos este la contraseña para conectarnos a este mediante ssh y si no la encontramos realizaremos una fuerza bruta:

<div align="left">

<figure><img src="../../../.gitbook/assets/image (12) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

</div>

<div align="left">

<figure><img src="../../../.gitbook/assets/image (13) (1) (1) (1).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

Si examinamos las imagenes que descargamos del FTP, encontramos infromacion oculta. Usamos stegseek para hacer una fuerza bruta.

```
stegseek -sf aa.jpg /usr/share/wordlists/rockyou.txt
StegSeek 0.6 - https://github.com/RickdeJager/StegSeek

[i] Found passphrase: "password"         
[i] Original filename: "ss.zip".
[i] Extracting to "aa.jpg.out".

// Extraemos
7z x aa.jpg.out
```

<div align="left">

<figure><img src="../../../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

Ya tenemos la contraseña de ssh del usuario slade, por lo tanto nos conectamos a la maquina con el usuario slade y vemos la flag user.txt

<div align="left">

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1).png" alt="" width="369"><figcaption></figcaption></figure>

</div>

Ahora buscamos la manera de escalar privilegios, probamos con sudo -l y vemos que podemos ejecutar como root /usr/bin/pkexec, por lo que buscando informacion en GTFObins probamos con el comando y nos permite ser root y ver la ultima flag

<div align="left">

<figure><img src="../../../.gitbook/assets/image (37).png" alt="" width="563"><figcaption></figcaption></figure>

</div>

<div align="left">

<figure><img src="../../../.gitbook/assets/image (2) (1) (1) (1) (1) (1).png" alt="" width="563"><figcaption></figcaption></figure>

</div>
